<?xml version="1.0" encoding="windows-1252"?>
<XMI xmi.version="1.1" xmlns:UML="omg.org/UML1.3">
	<XMI.header><XMI.documentation><XMI.exporter>Enterprise Architect</XMI.exporter><XMI.exporterVersion>2.5</XMI.exporterVersion></XMI.documentation></XMI.header><XMI.content><UML:Model name="EA Model" xmi.id="MX_EAID_1DE988EB_0138_4cdf_94F1_A81359CDA2AC"><UML:Namespace.ownedElement><UML:Class name="EARootClass" xmi.id="EAID_11111111_5487_4080_A7F4_41526CB0AA00" isRoot="true" isLeaf="false" isAbstract="false"/><UML:Package name="auth" xmi.id="EAPK_1DE988EB_0138_4cdf_94F1_A81359CDA2AC" isRoot="false" isLeaf="false" isAbstract="false" visibility="public"><UML:ModelElement.taggedValue><UML:TaggedValue tag="parent" value="EAPK_378FB0A9_DF6D_422d_ABAB_E8465127C828"/><UML:TaggedValue tag="created" value="2017-12-18 11:05:08"/><UML:TaggedValue tag="modified" value="2017-12-18 11:05:08"/><UML:TaggedValue tag="iscontrolled" value="TRUE"/><UML:TaggedValue tag="xmlpath" value="eaA\A81359CDA2AC.xml"/><UML:TaggedValue tag="version" value="1.0"/><UML:TaggedValue tag="isprotected" value="FALSE"/><UML:TaggedValue tag="usedtd" value="FALSE"/><UML:TaggedValue tag="logxml" value="FALSE"/><UML:TaggedValue tag="packageFlags" value="VCCFG=SKLD;CRC=0;"/><UML:TaggedValue tag="phase" value="1.0"/><UML:TaggedValue tag="status" value="Proposed"/><UML:TaggedValue tag="author" value="husekjos"/><UML:TaggedValue tag="complexity" value="1"/><UML:TaggedValue tag="ea_stype" value="Public"/><UML:TaggedValue tag="tpos" value="0"/><UML:TaggedValue tag="gentype" value="Java"/></UML:ModelElement.taggedValue><UML:Namespace.ownedElement><UML:Class name="UserAuthenticator" xmi.id="EAID_C80FECE4_2BC2_4c01_AFED_259B2E0B470E" visibility="public" namespace="EAPK_1DE988EB_0138_4cdf_94F1_A81359CDA2AC" isRoot="false" isLeaf="false" isAbstract="false" isActive="false"><UML:ModelElement.taggedValue><UML:TaggedValue tag="documentation" value="Checks JWT data sent in request headers and loads associated user information from the database."/><UML:TaggedValue tag="isSpecification" value="false"/><UML:TaggedValue tag="ea_stype" value="Class"/><UML:TaggedValue tag="ea_ntype" value="2"/><UML:TaggedValue tag="version" value="1.0"/><UML:TaggedValue tag="package" value="EAPK_1DE988EB_0138_4cdf_94F1_A81359CDA2AC"/><UML:TaggedValue tag="classparams" value="Actual=JwtContext, User,Parent=Authenticator,BindType=Real,"/><UML:TaggedValue tag="date_created" value="2017-12-18 11:05:08"/><UML:TaggedValue tag="date_modified" value="2017-12-18 11:05:08"/><UML:TaggedValue tag="genfile" value="C:\Users\Pepa\Desktop\School\SI\repo\src\api\src\main\java\cz\cvut\fit\project\skld\application\auth\UserAuthenticator.java"/><UML:TaggedValue tag="genlinks" value="Implements=Authenticator;"/><UML:TaggedValue tag="gentype" value="Java"/><UML:TaggedValue tag="tagged" value="0"/><UML:TaggedValue tag="package_name" value="auth"/><UML:TaggedValue tag="phase" value="1.0"/><UML:TaggedValue tag="author" value="husekjos"/><UML:TaggedValue tag="complexity" value="1"/><UML:TaggedValue tag="genlinks" value="Implements=Authenticator;"/><UML:TaggedValue tag="status" value="Proposed"/><UML:TaggedValue tag="tpos" value="0"/><UML:TaggedValue tag="ea_localid" value="3415"/><UML:TaggedValue tag="ea_eleType" value="element"/><UML:TaggedValue tag="eventflags" value="OBJ=1230;"/><UML:TaggedValue tag="parameters" value=";ARGS=Actual=JwtContext, User,Parent=Authenticator,BindType=Real,;"/><UML:TaggedValue tag="style" value="BackColor=-1;BorderColor=-1;BorderWidth=-1;FontColor=-1;VSwimLanes=1;HSwimLanes=1;BorderStyle=0;"/></UML:ModelElement.taggedValue><UML:Classifier.feature><UML:Operation name="authenticate" visibility="public" ownerScope="instance" isQuery="false" concurrency="sequential"><UML:ModelElement.taggedValue><UML:TaggedValue tag="documentation" value="Validate the JWT data and try to get user with ID that's saved as JwtContext's subject.&#xA;@return Optionally returns the user which is the subject in the given JwtContext"/><UML:TaggedValue tag="type" value="Optional&lt;User&gt;"/><UML:TaggedValue tag="const" value="false"/><UML:TaggedValue tag="synchronised" value="0"/><UML:TaggedValue tag="concurrency" value="Sequential"/><UML:TaggedValue tag="position" value="1"/><UML:TaggedValue tag="returnarray" value="0"/><UML:TaggedValue tag="pure" value="0"/><UML:TaggedValue tag="ea_guid" value="{F548183E-33C2-4ba0-A8F4-F2EC2F50E316}"/><UML:TaggedValue tag="ea_localid" value="1104"/><UML:TaggedValue tag="annotations" value="@Override" xmi.id="EAID_C6FE9572_3CFC_4b8a_8DE1_4EB6F6ABF426"/></UML:ModelElement.taggedValue><UML:BehavioralFeature.parameter><UML:Parameter kind="return" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="eaxmiid0"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="pos" value="0"/><UML:TaggedValue tag="type" value="Optional&lt;User&gt;"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="ea_guid" value="{RETURNID-33C2-4ba0-A8F4-F2EC2F50E316}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter><UML:Parameter name="jwtContext" kind="in" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="eaxmiid1"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="note" value="the session identifier sent with the request"/><UML:TaggedValue tag="pos" value="0"/><UML:TaggedValue tag="type" value="JwtContext"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="ea_guid" value="{13A0F8E4-E273-4cc3-AEE7-2D64A7E8B07A}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter></UML:BehavioralFeature.parameter></UML:Operation><UML:Operation name="UserAuthenticator" visibility="public" ownerScope="instance" isQuery="false" concurrency="sequential"><UML:ModelElement.taggedValue><UML:TaggedValue tag="documentation" value="Create a new UserAuthenticator, injecting the given UserDAO and using the given SessionFactory to create database sessions used by the DAO."/><UML:TaggedValue tag="const" value="false"/><UML:TaggedValue tag="synchronised" value="0"/><UML:TaggedValue tag="concurrency" value="Sequential"/><UML:TaggedValue tag="position" value="0"/><UML:TaggedValue tag="returnarray" value="0"/><UML:TaggedValue tag="pure" value="0"/><UML:TaggedValue tag="ea_guid" value="{4EB046DE-D710-4ed9-9C85-55455BF985A7}"/><UML:TaggedValue tag="ea_localid" value="1105"/></UML:ModelElement.taggedValue><UML:BehavioralFeature.parameter><UML:Parameter kind="return" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="eaxmiid2"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="pos" value="0"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="ea_guid" value="{RETURNID-D710-4ed9-9C85-55455BF985A7}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter><UML:Parameter name="dao" kind="in" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="EAID_5E484D72_FE18_44e5_B71B_B52474000FED"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="note" value="UserDAO used to fetch users."/><UML:TaggedValue tag="pos" value="0"/><UML:TaggedValue tag="type" value="UserDAO"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="classifier" value="EAID_5E484D72_FE18_44e5_B71B_B52474000FED"/><UML:TaggedValue tag="ea_guid" value="{FA19A575-7018-4e75-8F16-9E22F4A41CF9}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter><UML:Parameter name="sessionFactory" kind="in" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="eaxmiid3"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="note" value="Dropwizard's AbstractDAOs need to be run within a managed session which is created by adding a @UnitOfWork annotation to a method on a resource. Unfortunately, user authentication does not run inside this &quot;unit of work&quot; so the user has to pass a SessionFactory and we bind it to ManagedSessionContext to be able to use AbstractDAOs."/><UML:TaggedValue tag="pos" value="1"/><UML:TaggedValue tag="type" value="SessionFactory"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="ea_guid" value="{98272166-4E38-4064-8A53-E8A7EEAFA59E}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter></UML:BehavioralFeature.parameter></UML:Operation></UML:Classifier.feature></UML:Class><UML:Class name="UserAuthorizer" xmi.id="EAID_D5A38C0F_ABED_48c5_95CA_4950F0124D77" visibility="public" namespace="EAPK_1DE988EB_0138_4cdf_94F1_A81359CDA2AC" isRoot="false" isLeaf="false" isAbstract="false" isActive="false"><UML:ModelElement.taggedValue><UML:TaggedValue tag="documentation" value="Implements checking whether user has the role necessary to perform an action."/><UML:TaggedValue tag="isSpecification" value="false"/><UML:TaggedValue tag="ea_stype" value="Class"/><UML:TaggedValue tag="ea_ntype" value="2"/><UML:TaggedValue tag="version" value="1.0"/><UML:TaggedValue tag="package" value="EAPK_1DE988EB_0138_4cdf_94F1_A81359CDA2AC"/><UML:TaggedValue tag="classparams" value="Actual=User,Parent=Authorizer,BindType=Real,"/><UML:TaggedValue tag="date_created" value="2017-12-18 11:05:08"/><UML:TaggedValue tag="date_modified" value="2017-12-18 11:05:08"/><UML:TaggedValue tag="genfile" value="C:\Users\Pepa\Desktop\School\SI\repo\src\api\src\main\java\cz\cvut\fit\project\skld\application\auth\UserAuthorizer.java"/><UML:TaggedValue tag="genlinks" value="Implements=Authorizer;"/><UML:TaggedValue tag="gentype" value="Java"/><UML:TaggedValue tag="tagged" value="0"/><UML:TaggedValue tag="package_name" value="auth"/><UML:TaggedValue tag="phase" value="1.0"/><UML:TaggedValue tag="author" value="husekjos"/><UML:TaggedValue tag="complexity" value="1"/><UML:TaggedValue tag="genlinks" value="Implements=Authorizer;"/><UML:TaggedValue tag="status" value="Proposed"/><UML:TaggedValue tag="tpos" value="0"/><UML:TaggedValue tag="ea_localid" value="3416"/><UML:TaggedValue tag="ea_eleType" value="element"/><UML:TaggedValue tag="eventflags" value="OBJ=1230;"/><UML:TaggedValue tag="parameters" value=";ARGS=Actual=User,Parent=Authorizer,BindType=Real,;"/><UML:TaggedValue tag="style" value="BackColor=-1;BorderColor=-1;BorderWidth=-1;FontColor=-1;VSwimLanes=1;HSwimLanes=1;BorderStyle=0;"/></UML:ModelElement.taggedValue><UML:Classifier.feature><UML:Operation name="authorize" visibility="public" ownerScope="instance" isQuery="false" concurrency="sequential"><UML:ModelElement.taggedValue><UML:TaggedValue tag="documentation" value="Checks whether user has the requested role.&#xA;@return"/><UML:TaggedValue tag="type" value="boolean"/><UML:TaggedValue tag="const" value="false"/><UML:TaggedValue tag="synchronised" value="0"/><UML:TaggedValue tag="concurrency" value="Sequential"/><UML:TaggedValue tag="position" value="0"/><UML:TaggedValue tag="returnarray" value="0"/><UML:TaggedValue tag="pure" value="0"/><UML:TaggedValue tag="ea_guid" value="{63B5377F-0C64-48b3-B398-537687C77532}"/><UML:TaggedValue tag="ea_localid" value="1106"/><UML:TaggedValue tag="annotations" value="@Override" xmi.id="EAID_F0D4A2C6_888E_4e08_A8B0_7BD6C21987ED"/></UML:ModelElement.taggedValue><UML:BehavioralFeature.parameter><UML:Parameter kind="return" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="eaxmiid4"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="pos" value="0"/><UML:TaggedValue tag="type" value="boolean"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="ea_guid" value="{RETURNID-0C64-48b3-B398-537687C77532}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter><UML:Parameter name="user" kind="in" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="EAID_2B5DD24E_A1C6_4fb2_9F46_F338D0DAAB1F"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="note" value="the user that should be checked"/><UML:TaggedValue tag="pos" value="0"/><UML:TaggedValue tag="type" value="User"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="classifier" value="EAID_2B5DD24E_A1C6_4fb2_9F46_F338D0DAAB1F"/><UML:TaggedValue tag="ea_guid" value="{93F4FAF8-BF89-43f8-9CA8-66C687396D4A}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter><UML:Parameter name="role" kind="in" visibility="public"><UML:Parameter.type><UML:Classifier xmi.idref="eaxmiid5"/></UML:Parameter.type><UML:ModelElement.taggedValue><UML:TaggedValue tag="note" value="the role that the user must have to be authorized. Currently only &quot;admin&quot; and &quot;user&quot; are supported, controlled by the isAdmin field on User."/><UML:TaggedValue tag="pos" value="1"/><UML:TaggedValue tag="type" value="String"/><UML:TaggedValue tag="const" value="0"/><UML:TaggedValue tag="ea_guid" value="{536F9389-DBD5-4a6e-89D3-F33EB575FA65}"/></UML:ModelElement.taggedValue><UML:Parameter.defaultValue><UML:Expression/></UML:Parameter.defaultValue></UML:Parameter></UML:BehavioralFeature.parameter></UML:Operation></UML:Classifier.feature></UML:Class></UML:Namespace.ownedElement></UML:Package><UML:DataType xmi.id="eaxmiid2" visibility="private" isRoot="false" isLeaf="false" isAbstract="false"/><UML:DataType xmi.id="eaxmiid0" name="Optional&lt;User&gt;" visibility="private" isRoot="false" isLeaf="false" isAbstract="false"/><UML:DataType xmi.id="eaxmiid1" name="JwtContext" visibility="private" isRoot="false" isLeaf="false" isAbstract="false"/><UML:DataType xmi.id="eaxmiid3" name="SessionFactory" visibility="private" isRoot="false" isLeaf="false" isAbstract="false"/><UML:DataType xmi.id="eaxmiid4" name="boolean" visibility="private" isRoot="false" isLeaf="false" isAbstract="false"/><UML:DataType xmi.id="eaxmiid5" name="String" visibility="private" isRoot="false" isLeaf="false" isAbstract="false"/></UML:Namespace.ownedElement></UML:Model><UML:Diagram name="auth" xmi.id="EAID_721C048C_0D23_48cd_A986_58BFBD8450ED" diagramType="ClassDiagram" owner="EAPK_1DE988EB_0138_4cdf_94F1_A81359CDA2AC" toolName="Enterprise Architect 2.5"><UML:ModelElement.taggedValue><UML:TaggedValue tag="version" value="1.0"/><UML:TaggedValue tag="author" value="husekjos"/><UML:TaggedValue tag="created_date" value="2017-12-18 11:05:08"/><UML:TaggedValue tag="modified_date" value="2017-12-18 14:34:16"/><UML:TaggedValue tag="package" value="EAPK_1DE988EB_0138_4cdf_94F1_A81359CDA2AC"/><UML:TaggedValue tag="type" value="Logical"/><UML:TaggedValue tag="swimlanes" value="locked=false;orientation=0;width=0;inbar=false;names=false;color=-1;bold=false;fcol=0;tcol=-1;ofCol=-1;ufCol=-1;hl=0;ufh=0;cls=0;SwimlaneFont=lfh:-13,lfw:0,lfi:0,lfu:0,lfs:0,lfface:Calibri,lfe:0,lfo:0,lfchar:1,lfop:0,lfcp:0,lfq:0,lfpf=0,lfWidth=0;"/><UML:TaggedValue tag="matrixitems" value="locked=false;matrixactive=false;swimlanesactive=true;kanbanactive=false;width=1;clrLine=0;"/><UML:TaggedValue tag="ea_localid" value="399"/><UML:TaggedValue tag="EAStyle" value="ShowPrivate=0;ShowProtected=1;ShowPublic=1;HideRelationships=0;Locked=0;Border=1;HighlightForeign=1;PackageContents=1;SequenceNotes=0;ScalePrintImage=0;PPgs.cx=1;PPgs.cy=1;DocSize.cx=827;DocSize.cy=1169;ShowDetails=0;Orientation=P;Zoom=100;ShowTags=0;OpParams=2;VisibleAttributeDetail=0;ShowOpRetType=1;ShowIcons=1;CollabNums=0;HideProps=0;ShowReqs=0;ShowCons=0;PaperSize=9;HideParents=0;UseAlias=0;HideAtts=0;HideOps=0;HideStereo=0;HideElemStereo=0;ShowTests=0;ShowMaint=0;ConnectorNotation=UML 2.1;ExplicitNavigability=0;ShowShape=1;AdvancedElementProps=1;AdvancedFeatureProps=1;AdvancedConnectorProps=1;m_bElementClassifier=1;ShowNotes=0;SuppressBrackets=0;SuppConnectorLabels=0;PrintPageHeadFoot=0;ShowAsList=0;"/><UML:TaggedValue tag="styleex" value="SaveTag=351C5513;ExcludeRTF=0;DocAll=0;HideQuals=0;AttPkg=0;ShowTests=0;ShowMaint=0;SuppressFOC=1;MatrixActive=0;SwimlanesActive=1;KanbanActive=0;MatrixLineWidth=1;MatrixLineClr=0;MatrixLocked=0;TConnectorNotation=UML 2.1;TExplicitNavigability=0;AdvancedElementProps=1;AdvancedFeatureProps=1;AdvancedConnectorProps=1;m_bElementClassifier=1;ProfileData=;MDGDgm=;STBLDgm=;ShowNotes=0;VisibleAttributeDetail=0;ShowOpRetType=1;SuppressBrackets=0;SuppConnectorLabels=0;PrintPageHeadFoot=0;ShowAsList=0;SuppressedCompartments=;Theme=:119;"/></UML:ModelElement.taggedValue><UML:Diagram.element><UML:DiagramElement geometry="Left=331;Top=20;Right=526;Bottom=90;" subject="EAID_D5A38C0F_ABED_48c5_95CA_4950F0124D77" seqno="1" style="DUID=31C62DCC;"/><UML:DiagramElement geometry="Left=20;Top=20;Right=311;Bottom=90;" subject="EAID_C80FECE4_2BC2_4c01_AFED_259B2E0B470E" seqno="2" style="DUID=335AA457;"/></UML:Diagram.element></UML:Diagram></XMI.content><XMI.difference/><XMI.extensions xmi.extender="Enterprise Architect 2.5"><EAStub xmi.id="EAID_5E484D72_FE18_44e5_B71B_B52474000FED" name="UserDAO" UMLType="Interface"/><EAStub xmi.id="EAID_2B5DD24E_A1C6_4fb2_9F46_F338D0DAAB1F" name="User" UMLType="Class"/></XMI.extensions></XMI>
